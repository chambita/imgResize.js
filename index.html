<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>imgResize.js</title>
  <link href="static/style.css" rel="stylesheet" type="text/css">
  <link href="http://selfcss.org/baf/css/baf.css" media="screen" rel="stylesheet" type="text/css"/>
</head>
<body>
  <div class="box">
    <h1>imgResize.js</h1>
    <ul>
      <li><b>Version:</b> 0.2.-9</li>
      <li><b>License:</b> <a href="http://simon.waldherr.eu/license/mit/">MIT</a></li>
      <li><b>Demo:</b> <a href="http://simonwaldherr.github.io/imgResize.js/">simonwaldherr.github.io/imgResize.js/</a></li>
      <li><b>Repo:</b> <a href="https://github.com/SimonWaldherr/imgResize.js">github.com/SimonWaldherr/imgResize.js</a></li>
    </ul>
  </div>
  <div class="box">
    <h2>Images List</h2>
    <form action="#" onsubmit="return false;">
      <input type="file" id="imgfile" />
      <input type="button" class="baf w60 bluehover" id="btnLoad" value="Load" onclick="loadLocalImageToCanvas();" />
    </form>
    <ul id="imglist"></ul>
    <div class="baf-group baf-group-x1">
      <a class="baf w60 bluehover changeResizeMode blue">Normal</a>
      <a class="baf w60 bluehover changeResizeMode">Smart</a>
      <a class="baf w60 bluehover changeResizeMode">Smart+</a>
    </div>
    <br/><br/>
    <label for="width">WIDTH: </label>
    <input name="width" id="width" type="range" max="640" min="0" value="640" onchange="changeSlider()">
    <label for="height">HEIGHT: </label>
    <input name="height" id="height" type="range" max="480" min="0" value="480" onchange="changeSlider()">
    <br/><br/>
    <canvas id="originalCanvas" data-src="4032618153_e0c19e93a0_z.jpg" width="640" height="480" style="display:none;">
    Your browser does not support the canvas element.
    </canvas>
    <div id="canbox">
      <canvas id="Canvas" data-src="4032618153_e0c19e93a0_z.jpg" width="640" height="480">
      Your browser does not support the canvas element.
      </canvas>
    </div><br/>
    <form action="#" onsubmit="return false;">
      <input type="button" id="btnExport" class="baf w60 bluehover" value="Export" onclick="exportCanvasToImage();" />
    </form>
    <br/><br/>
    <div id="json" style="display:none">imgSmartResize</div>
  </div>
  <script type="text/javascript">
    var i, resizeMode = 'Normal', selectedImage, imagebuttons = document.getElementsByClassName('changeImage'), modebuttons = document.getElementsByClassName('changeResizeMode');
    function $val(id) {
      return document.getElementById(id).value;
    }
    function changeSlider() {
      if(resizeMode === 'Normal') {
        imgResize({'height' : $val('height'), 'width' : $val('width'), 'canvas' : 'Canvas'});
      } else if(resizeMode === 'Smart') {
        imgSmartResize({'height' : $val('height'), 'width' : $val('width'), 'canvas' : 'Canvas', 'ocanvas' : 'originalCanvas', 'mode': 1});
      } else if(resizeMode === 'Smart+') {
        imgSmartResize({'height' : $val('height'), 'width' : $val('width'), 'canvas' : 'Canvas', 'ocanvas' : 'originalCanvas', 'mode': 2});
      }
    }
    window.onload = function() {
      selectedImage = random(0, demoimages.length-1);
      printImgList(demoimages,'imglist');
      loadImageToCanvas(demoimages, selectedImage);
      imagebuttons[selectedImage].className += ' blue';
      for (i = 0; i < modebuttons.length; i++) {
        modebuttons[i].onclick = function () {
          var classes, i, active;
          for (i = 0; i < modebuttons.length; i++) {
            classes = modebuttons[i].className.split(/\s+/);
            active = classes.indexOf('blue');
            if(active !== -1) {
              classes[active] = '';
            }
            modebuttons[i].className = classes.join(" ");
          }
          edgeDetectLines = [];
          this.className += ' blue';
          resizeMode = this.innerHTML;
          if(resizeMode === 'Normal') {
            imgResize({'height' : $val('height'), 'width' : $val('width'), 'canvas' : 'Canvas'});
          } else if(resizeMode === 'Smart') {
            imgSmartResize({'height' : $val('height'), 'width' : $val('width'), 'canvas' : 'Canvas', 'ocanvas' : 'originalCanvas', 'mode': 1});
          } else if(resizeMode === 'Smart+') {
            imgSmartResize({'height' : $val('height'), 'width' : $val('width'), 'canvas' : 'Canvas', 'ocanvas' : 'originalCanvas', 'mode': 2});
          }
        }
      }
      for (i = 0; i < imagebuttons.length; i++) {
        imagebuttons[i].onclick = function () {
          var classes, i, active;
          for (i = 0; i < imagebuttons.length; i++) {
            classes = imagebuttons[i].className.split(/\s+/);
            active = classes.indexOf('blue');
            if(active !== -1) {
              classes[active] = '';
            }
            imagebuttons[i].className = classes.join(" ");
          }
          this.className += ' blue';
          loadImageToCanvas(demoimages,this.getAttribute("data-imgid"));
        }
      }
    };
  </script>
  <script type="text/javascript" src="imgresize.js"></script>
  <script type="text/javascript" src="static/script.js"></script>
</body>
</html>
